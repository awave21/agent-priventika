import{d as k,u as C,o as U,A as j,r as D,j as u,k as p,l as L,b as e,n as i,B as z,f as r,t as o,e as f,c as m,g as B,v as M,F as N,m as S,i as n}from"./index-J5MGib1M.js";import{_ as V,P as b,a as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-CJ_uuTcT.js";import{c as P}from"./createLucideIcon-BGKXoyUX.js";/**
 * @license lucide-vue-next v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=P("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),q={class:"p-8"},$={class:"flex items-center justify-between mb-8"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},I={class:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200"},O={class:"flex items-center justify-between"},Q={class:"text-3xl font-semibold text-emerald-600"},R={class:"w-12 h-12 bg-emerald-50 rounded-xl flex items-center justify-center"},T={class:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200"},G={class:"flex items-center justify-between"},H={class:"text-3xl font-semibold text-slate-400"},J={class:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center"},K={class:"bg-white rounded-2xl shadow-sm border border-slate-200"},W={class:"p-6 border-b border-slate-200"},X={key:0,class:"text-center py-16"},Y={class:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},Z={key:1,class:"divide-y divide-slate-200"},ee={class:"flex items-center gap-4"},te={class:"flex items-center gap-3"},se={class:"font-medium text-slate-900"},le={class:"text-sm text-slate-500"},ae=["onClick"],ce=k({__name:"UsersView",setup(oe){const a=C();U(()=>{j()});const d=D(""),v=t=>t.name||t.username||t.phone,x=u(()=>{if(!d.value)return a.users.value;const t=d.value.toLowerCase();return a.users.value.filter(s=>v(s).toLowerCase().includes(t)||s.phone.toLowerCase().includes(t))}),g=u(()=>a.users.value.filter(t=>t.isActive).length),_=u(()=>a.users.value.filter(t=>!t.isActive).length),c=u(()=>a.users.value.length>0&&a.users.value.every(t=>t.isActive)),y=async t=>{await a.toggleUserActive(t)},w=async()=>{c.value?confirm("Вы уверены, что хотите отключить всех пользователей?")&&await a.deactivateAllUsers():confirm("Вы уверены, что хотите включить всех пользователей?")&&await a.activateAllUsers()},A=t=>new Date(t).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return(t,s)=>(n(),p(V,null,{default:L(()=>[e("div",q,[e("div",$,[s[1]||(s[1]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-slate-900 mb-2"},"Пользователи"),e("p",{class:"text-slate-600"},"Управление пользователями системы")],-1)),e("button",{onClick:w,class:i(["flex items-center gap-2 px-4 py-2 text-white rounded-xl transition-colors",c.value?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"])},[(n(),p(z(c.value?r(h):r(b)),{size:20})),e("span",null,o(c.value?"Отключить всех":"Включить всех"),1)],2)]),e("div",E,[e("div",I,[e("div",O,[e("div",null,[s[2]||(s[2]=e("h3",{class:"text-sm font-medium text-slate-600 mb-1"},"Активные пользователи",-1)),e("p",Q,o(g.value),1)]),e("div",R,[f(r(b),{size:24,class:"text-emerald-600"})])])]),e("div",T,[e("div",G,[e("div",null,[s[3]||(s[3]=e("h3",{class:"text-sm font-medium text-slate-600 mb-1"},"Неактивные пользователи",-1)),e("p",H,o(_.value),1)]),e("div",J,[f(r(h),{size:24,class:"text-slate-400"})])])])]),e("div",K,[e("div",W,[B(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>d.value=l),type:"text",placeholder:"Поиск пользователей...",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"},null,512),[[M,d.value]])]),x.value.length===0?(n(),m("div",X,[e("div",Y,[f(r(F),{size:32,class:"text-slate-400"})]),s[4]||(s[4]=e("h3",{class:"text-lg font-medium text-slate-900 mb-2"},"Пользователи не найдены",-1)),s[5]||(s[5]=e("p",{class:"text-sm text-slate-600"},"Попробуйте изменить параметры поиска",-1))])):(n(),m("div",Z,[(n(!0),m(N,null,S(x.value,l=>(n(),m("div",{key:l.id,class:"p-6 flex items-center justify-between hover:bg-slate-50 transition-colors"},[e("div",ee,[e("div",{class:i(["w-12 h-12 rounded-full flex items-center justify-center",l.isActive?"bg-emerald-100":"bg-slate-200"])},[e("span",{class:i(["font-medium",l.isActive?"text-emerald-700":"text-slate-600"])},o(v(l)[0].toUpperCase()),3)],2),e("div",null,[e("div",te,[e("h3",se,o(v(l)),1),e("span",{class:i(["px-2 py-1 text-xs rounded-lg",l.isActive?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600"])},o(l.isActive?"Активен":"Неактивен"),3)]),e("p",le,o(l.phone)+" • "+o(A(l.createdAt)),1)])]),e("button",{onClick:ie=>y(l.id),class:i(["relative w-14 h-7 rounded-full transition-colors",l.isActive?"bg-emerald-500":"bg-slate-300"])},[e("div",{class:i(["absolute top-0.5 w-6 h-6 bg-white rounded-full transition-all",l.isActive?"left-7":"left-0.5"])},null,2)],10,ae)]))),128))]))])])]),_:1}))}});export{ce as default};
